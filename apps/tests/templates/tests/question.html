{% extends "base.html" %}
{% block title %}Питання{% endblock %}

{% block content %}
{% if test.author == user %}
<button class="flex justify-center btn btn-primary mr-4 mt-6" onclick="create_question.showModal()">Створити питання</button>
<div class="bg-base-300 mt-6 w-full h-80 flex flex-col justify-center items-center rounded-box">
    <p class="flex justify-center font-bold">{{ question.content }}</p>
    {% if question.image %}
    <img src="{{ question.image.url }}" alt="Question Image" class="mt-4 max-w-full h-auto">
    {% endif %}
    {% if question %}
    <form action="{% url 'tests:delete_test' test.id %}" method="post" enctype='multipart/form-data'>
        {% csrf_token %}
        <button class="btn mt-6">Видалити питання</button>
    </form>
    {% endif %}
</div>
{% elif test.author != user %}
<div class="bg-base-300 mt-6 w-full h-80 flex flex-col justify-center items-center rounded-box">
  <p class="flex justify-center font-bold">{{ question.content }}</p>
  {% if question.image %}
  <img src="{{ question.image.url }}" alt="Question Image" class="mt-4 max-w-full h-auto">
  {% endif %}
</div>
{% endif %}

<dialog id="create_question" class="modal">
  <div class="modal-box">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
    </form>
    {% if test.author and test.id %}
    <form action="{% url 'tests:create_question' test_id=test.id %}" method="post">
      {% csrf_token %}
      <div class="grid grid-cols-1 gap-6">
        {% for field in question_form %}
        <div class="form-control">
          <label class="label">
            <span class="label-text">{{ field.label }}</span>
          </label>
          {% if field.name == 'content' %}
            <input type="text" placeholder="{{ Питання }}" class="input input-bordered w-full max-w-xs" name="{{ field.name }}">
          {% elif field.name == 'image' %}
            <input type="file" class="file-input w-full max-w-xs" name="{{ field.name }}">
          {% endif %}
        </div>
        {% endfor %}
      </div>
      <button type="submit" class="btn w-80 mt-6">Створити</button>
    </form>
    {% endif %}
  </div>
</dialog>

{% endblock %}